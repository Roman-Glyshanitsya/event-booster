{"version":3,"file":"index.js","sources":["../src/js/events-service-api.js","../src/templates/card.js","../src/js/pagination.js","../src/js/base-markup.js"],"sourcesContent":["export default class EventsApiService {\n  #API_KEY = 'cbbvEGI4A6Q7cSGEi3Xqg23Vkvb9pPby';\n  #BASE_URL = 'https://app.ticketmaster.com/discovery/v2/events.json';\n\n  constructor() {\n    this.page = 0;\n    this.pageSize = 12;\n    this.searchQuery = '';\n  }\n\n  async fetchEvents() {\n    const searchParams = new URLSearchParams({\n      apikey: this.#API_KEY,\n      keyword: this.searchQuery,\n      page: this.page,\n      size: this.pageSize,\n    });\n\n    const url = `${this.#BASE_URL}?${searchParams}&classificationName=music`;\n\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw new Error('Faild to fetch events');\n    }\n\n    return response.json();\n  }\n}\n","export default function cardMarkup(cards) {\n  const markup = cards.map(card => {\n    const imageUrl = card.images[0]?.url || '/img/default-image.png';\n    const nameArtist = card.name || 'No Name Available';\n    const eventDate = card.dates.start.localDate || 'Unknown Date';\n    const location = card._embedded?.venues[0]?.name || 'Unknown Location';\n    const eventUrl = card.url || '#';\n\n    return `\n        <li class=\"cards__item\">\n        <img\n          src=\"${imageUrl}\"\n          alt=\"${nameArtist}\"\n          class=\"cards__item__image\"\n        />\n        <h2 class=\"cards__item__title\">${nameArtist}</h2>\n        <p class=\"cards__item__date\">${eventDate}</p>\n        <a\n          href=\"${eventUrl}\"\n          class=\"cards__item__location__link\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <svg class=\"cards__item__location__icon\">\n            <use href=\"/img/icons/symbol-defs.svg#icon-location\"></use>\n          </svg>\n          ${location}</a\n        >\n      </li>\n      `;\n  });\n\n  return markup.join('');\n}\n","export function renderPagination(totalPages, currentPage, onPageClick) {\n  const paginationList = document.querySelector('.cards__pagination-list');\n\n  paginationList.innerHTML = '';\n\n  let buttonsMarkup = '';\n\n  for (let i = 0; i < totalPages; i++) {\n    buttonsMarkup += `\n        <li class=\"pagination__item\">\n        <button class=\"pagination__button ${\n          i === currentPage ? 'active' : ''\n        }\" data-page=\"${i}\">\n        ${i + 1}\n        </button>\n        </li>\n        `;\n  }\n\n  paginationList.insertAdjacentHTML('beforeend', buttonsMarkup);\n\n  paginationList.addEventListener('click', onPaginalBtnClick);\n\n  function onPaginalBtnClick(e) {\n    if (e.target.tagName !== 'BUTTON') return;\n\n    const newPage = Number(e.target.dataset.page);\n\n    if (newPage === currentPage) return;\n\n    onPageClick(newPage);\n  }\n}\n","import EventsApiService from './events-service-api';\nimport cardMarkup from '../templates/card';\nimport { renderPagination } from './pagination';\n\nconsole.log(renderPagination);\n\nconst cardsList = document.querySelector('.cards__list');\nconst searchForm = document.querySelector('.header__form');\nconst searchInput = document.getElementById('searchQuery');\n\nconst eventsApiService = new EventsApiService();\n\nrenderEvents();\n\nsearchForm.addEventListener('submit', onSearchQuery);\n\nasync function onSearchQuery(e) {\n  e.preventDefault();\n\n  eventsApiService.searchQuery = searchInput.value.trim();\n\n  clearEventsList();\n\n  await renderEvents();\n}\n\nexport default async function renderEvents() {\n  try {\n    const data = await eventsApiService.fetchEvents();\n    const events = data._embedded?.events || [];\n\n    const markup = cardMarkup(events);\n\n    cardsList.insertAdjacentHTML('beforeend', markup);\n\n    renderPagination(\n      eventsApiService.totalPages,\n      eventsApiService.page,\n      onPageClick\n    );\n  } catch (error) {\n    console.error('Error rendering events: ', error);\n  }\n}\n\nfunction clearEventsList() {\n  cardsList.innerHTML = '';\n}\n\nfunction onPageClick() {\n  eventsApiService.page = newPage;\n\n  clearEventsList();\n  renderEvents();\n}\n"],"names":["EventsApiService","__privateAdd","_API_KEY","_BASE_URL","searchParams","__privateGet","url","response","cardMarkup","cards","card","imageUrl","_a","nameArtist","eventDate","location","_c","_b","eventUrl","renderPagination","totalPages","currentPage","onPageClick","paginationList","buttonsMarkup","i","onPaginalBtnClick","e","newPage","cardsList","searchForm","searchInput","eventsApiService","renderEvents","onSearchQuery","clearEventsList","events","markup","error"],"mappings":"+8BAAe,MAAMA,CAAiB,CAIpC,aAAc,CAHdC,EAAA,KAAAC,EAAW,oCACXD,EAAA,KAAAE,EAAY,yDAGV,KAAK,KAAO,EACZ,KAAK,SAAW,GAChB,KAAK,YAAc,EACpB,CAED,MAAM,aAAc,CAClB,MAAMC,EAAe,IAAI,gBAAgB,CACvC,OAAQC,EAAA,KAAKH,GACb,QAAS,KAAK,YACd,KAAM,KAAK,KACX,KAAM,KAAK,QACjB,CAAK,EAEKI,EAAM,GAAGD,EAAA,KAAKF,EAAS,IAAIC,CAAY,4BAEvCG,EAAW,MAAM,MAAMD,CAAG,EAEhC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuB,EAGzC,OAAOA,EAAS,MACjB,CACH,CA3BEL,EAAA,YACAC,EAAA,YCFa,SAASK,EAAWC,EAAO,CAgCxC,OA/BeA,EAAM,IAAIC,GAAQ,WAC/B,MAAMC,IAAWC,EAAAF,EAAK,OAAO,CAAC,IAAb,YAAAE,EAAgB,MAAO,yBAClCC,EAAaH,EAAK,MAAQ,oBAC1BI,EAAYJ,EAAK,MAAM,MAAM,WAAa,eAC1CK,IAAWC,GAAAC,EAAAP,EAAK,YAAL,YAAAO,EAAgB,OAAO,KAAvB,YAAAD,EAA2B,OAAQ,mBAC9CE,EAAWR,EAAK,KAAO,IAE7B,MAAO;AAAA;AAAA;AAAA,iBAGMC,CAAQ;AAAA,iBACRE,CAAU;AAAA;AAAA;AAAA,yCAGcA,CAAU;AAAA,uCACZC,CAAS;AAAA;AAAA,kBAE9BI,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAQdH,CAAQ;AAAA;AAAA;AAAA,OAIpB,CAAG,EAEa,KAAK,EAAE,CACvB,CCjCO,SAASI,EAAiBC,EAAYC,EAAaC,EAAa,CACrE,MAAMC,EAAiB,SAAS,cAAc,yBAAyB,EAEvEA,EAAe,UAAY,GAE3B,IAAIC,EAAgB,GAEpB,QAASC,EAAI,EAAGA,EAAIL,EAAYK,IAC9BD,GAAiB;AAAA;AAAA,4CAGXC,IAAMJ,EAAc,SAAW,EAChC,gBAAeI,CAAC;AAAA,UACfA,EAAI,CAAC;AAAA;AAAA;AAAA,UAMbF,EAAe,mBAAmB,YAAaC,CAAa,EAE5DD,EAAe,iBAAiB,QAASG,CAAiB,EAE1D,SAASA,EAAkBC,EAAG,CAC5B,GAAIA,EAAE,OAAO,UAAY,SAAU,OAEnC,MAAMC,EAAU,OAAOD,EAAE,OAAO,QAAQ,IAAI,EAExCC,IAAYP,GAEhBC,EAAYM,CAAO,CACpB,CACH,CC5BA,QAAQ,IAAIT,CAAgB,EAE5B,MAAMU,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAa,SAAS,cAAc,eAAe,EACnDC,EAAc,SAAS,eAAe,aAAa,EAEnDC,EAAmB,IAAIhC,EAE7BiC,IAEAH,EAAW,iBAAiB,SAAUI,CAAa,EAEnD,eAAeA,EAAc,EAAG,CAC9B,EAAE,eAAc,EAEhBF,EAAiB,YAAcD,EAAY,MAAM,KAAI,EAErDI,IAEA,MAAMF,EAAY,CACpB,CAEe,eAAeA,GAAe,OAC3C,GAAI,CAEF,MAAMG,IAASxB,GADF,MAAMoB,EAAiB,eAChB,YAAL,YAAApB,EAAgB,SAAU,CAAA,EAEnCyB,EAAS7B,EAAW4B,CAAM,EAEhCP,EAAU,mBAAmB,YAAaQ,CAAM,EAEhDlB,EACEa,EAAiB,WACjBA,EAAiB,KACjBV,CACN,CACG,OAAQgB,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CAChD,CACH,CAEA,SAASH,GAAkB,CACzBN,EAAU,UAAY,EACxB,CAEA,SAASP,GAAc,CACrBU,EAAiB,KAAO,QAExBG,IACAF,GACF"}