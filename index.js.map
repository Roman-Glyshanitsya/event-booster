{"version":3,"file":"index.js","sources":["../src/js/events-service-api.js","../src/templates/card.js","../src/js/pagination.js","../src/js/base-markup.js","../src/templates/modal-card.js","../src/js/modal-cards-render.js"],"sourcesContent":["export default class EventsApiService {\n  #API_KEY = 'cbbvEGI4A6Q7cSGEi3Xqg23Vkvb9pPby';\n  #BASE_URL = 'https://app.ticketmaster.com/discovery/v2/events.json';\n\n  constructor() {\n    this.page = 0;\n    this.pageSize = 6;\n    this.searchQuery = '';\n  }\n\n  async fetchEvents({ id = null } = {}) {\n    const searchParams = new URLSearchParams({\n      apikey: this.#API_KEY,\n      keyword: this.searchQuery,\n      page: this.page,\n      size: this.pageSize,\n    });\n\n    const url = id\n      ? `${this.#BASE_URL}/${id}?${searchParams}`\n      : `${this.#BASE_URL}?${searchParams}&classificationName=music`;\n\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw new Error('Faild to fetch events');\n    }\n\n    return response.json();\n  }\n}\n","export default function cardMarkup(cards) {\n  const markup = cards.map(card => {\n    const imageUrl = card.images[0]?.url || '/img/default-image.png';\n    const nameArtist = card.name || 'No Name Available';\n    const eventDate = card.dates.start.localDate || 'Unknown Date';\n    const location = card._embedded?.venues[0]?.name || 'Unknown Location';\n    const eventUrl = card.url || '#';\n\n    return `\n        <li class=\"cards__item\" data-id=\"${card.id}\">\n        <img\n          src=\"${imageUrl}\"\n          alt=\"${nameArtist}\"\n          class=\"cards__item__image\"\n        />\n        <h2 class=\"cards__item__title\">${nameArtist}</h2>\n        <p class=\"cards__item__date\">${eventDate}</p>\n        <a\n          href=\"${eventUrl}\"\n          class=\"cards__item__location__link\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <svg class=\"cards__item__location__icon\">\n            <use href=\"/img/icons/symbol-defs.svg#icon-location\"></use>\n          </svg>\n          ${location}</a\n        >\n      </li>\n      `;\n  });\n\n  return markup.join('');\n}\n","export function renderPagination(totalPages, currentPage, onPageClick) {\n  const paginationList = document.querySelector('.cards__pagination-list');\n\n  paginationList.innerHTML = '';\n\n  const paginationButtons = getPaginationButtons(totalPages, currentPage);\n\n  const buttonsMarkup = paginationButtons\n    .map(page => {\n      if (page === '...') {\n        return `<li class=\"pagination__item\"><span class=\"pagination__dots\">...</span></li>`;\n      }\n      return `\n        <li class=\"pagination__item\">\n          <button class=\"pagination__button ${\n            page === currentPage ? 'active' : ''\n          }\" data-page=\"${page}\">\n            ${page + 1}\n          </button>\n        </li>\n      `;\n    })\n    .join('');\n\n  paginationList.insertAdjacentHTML('beforeend', buttonsMarkup);\n\n  paginationList.addEventListener('click', onPaginalBtnClick);\n\n  function onPaginalBtnClick(e) {\n    if (e.target.tagName !== 'BUTTON') return;\n\n    const newPage = Number(e.target.dataset.page);\n\n    if (newPage === currentPage) return;\n\n    onPageClick(newPage);\n  }\n}\n\n// /**\n//  * Генерує кнопки для пагінації\n//  * @param {number} totalPages - Загальна кількість сторінок\n//  * @param {number} currentPage - Поточна сторінка\n//  * @returns {Array} Масив сторінок та крапок\n//  */\nfunction getPaginationButtons(totalPages, currentPage) {\n  const buttons = [];\n\n  const maxVisibleButtons = 5; // Максимум кнопок на панелі\n\n  if (totalPages <= maxVisibleButtons) {\n    // Якщо сторінок менше або дорівнює максимуму\n    for (let i = 0; i < totalPages; i++) {\n      buttons.push(i);\n    }\n  } else {\n    if (currentPage > 1) buttons.push(0); // Перша сторінка\n    if (currentPage > 2) buttons.push('...'); // Крапки перед поточним блоком\n\n    const start = Math.max(0, currentPage - 1);\n    const end = Math.min(totalPages, currentPage + 2);\n\n    for (let i = start; i < end; i++) {\n      buttons.push(i);\n    }\n\n    if (currentPage < totalPages - 3) buttons.push('...'); // Крапки після поточного блоку\n    if (currentPage < totalPages - 1) buttons.push(totalPages - 1); // Остання сторінка\n  }\n\n  return buttons;\n}\n","import EventsApiService from './events-service-api';\nimport cardMarkup from '../templates/card';\nimport { renderPagination } from './pagination';\n\nconst cardsList = document.querySelector('.cards__list');\nconst paginationList = document.querySelector('.cards__pagination-list');\nconst searchForm = document.querySelector('.header__form');\nconst searchInput = document.getElementById('searchQuery');\n\nconst eventsApiService = new EventsApiService();\n\nrenderEvents();\n\nsearchForm.addEventListener('submit', onSearchQuery);\n\nasync function onSearchQuery(e) {\n  e.preventDefault();\n\n  eventsApiService.searchQuery = searchInput.value.trim();\n  eventsApiService.page = 0;\n\n  clearEventsList();\n  clearPagination();\n\n  await renderEvents();\n}\n\nexport default async function renderEvents() {\n  try {\n    const data = await eventsApiService.fetchEvents();\n    const events = data._embedded?.events || [];\n\n    const markup = cardMarkup(events);\n\n    cardsList.insertAdjacentHTML('beforeend', markup);\n\n    const totalPages = data.page.totalPages;\n    // console.log(\n    //   'Total Pages:',\n    //   totalPages,\n    //   'Current Page:',\n    //   eventsApiService.page\n    // );\n\n    renderPagination(totalPages, eventsApiService.page, onPageClick);\n  } catch (error) {\n    console.error('Error rendering events: ', error);\n  }\n}\n\nfunction clearEventsList() {\n  cardsList.innerHTML = '';\n}\n\nfunction clearPagination() {\n  paginationList.innerHTML = '';\n}\n\nfunction onPageClick(newPage) {\n  if (newPage === eventsApiService.page) return;\n\n  eventsApiService.page = newPage;\n\n  clearEventsList();\n  renderEvents();\n}\n","export default function modalMarkup(modal) {\n  return `\n  <div class=\"info__modal\">\n    <button class=\"info__modal__close-btn\">x</button>\n    <img src=\"/img/modal-small.jpg\" alt=\"\" class=\"info__modal__small-img\" />\n    <div class=\"info__modal__content__container\">\n      <img src=\"/img/modal-poster.jpg\" alt=\"\" class=\"info__modal__poster\" />\n      <div class=\"info__modal__text-thumb\">\n        <h3 class=\"info__modal__title\">INFO</h3>\n        <p class=\"info__modal__text\">\n          Atlas Weekend is the largest music festival in Ukraine. More than 200\n          artists will create a proper music festival atmosphere on 10 stages\n        </p>\n        <h3 class=\"info__modal__title\">WHEN</h3>\n        <p class=\"info__modal__text\">2021-06-09</p>\n        <p class=\"info__modal__text\">20:00 (Kyiv/Ukraine)</p>\n        <h3 class=\"info__modal__title\">WHERE</h3>\n        <p class=\"info__modal__text\">Kyiv, Ukraine</p>\n        <p class=\"info__modal__text\">VDNH</p>\n        <h3 class=\"info__modal__title\">WHO</h3>\n        <p class=\"info__modal__text\">The Black Eyed Peas</p>\n        <h3 class=\"info__modal__title\">PRICES</h3>\n        <p class=\"info__modal__text\">Standart 300-500 UAH</p>\n        <button class=\"info__modal__buy-button\" type=\"button\">\n          BUY TICKETS\n        </button>\n        <p class=\"info__modal__text\">VIP 1000-1500 UAH</p>\n        <button class=\"info__modal__buy-button\" type=\"button\">\n          BUY TICKETS\n        </button>\n      </div>\n    </div>\n    <button class=\"info__modal__more-button\" type=\"button\">\n      MORE FROM THIS AUTHOR\n    </button>\n  </div>\n    `;\n}\n","import modalMarkup from '../templates/modal-card';\nimport EventsApiService from './events-service-api';\n\nconst cardList = document.querySelector('.cards__list');\nconst modalCardEl = document.getElementById('modal-card');\n\nconst eventsApiService = new EventsApiService();\n\ncardList.addEventListener('click', openModalCard);\n\nexport default async function openModalCard(e) {\n  const card = e.target.closest('.cards__item');\n\n  if (!card) return;\n\n  const eventId = card.dataset.id;\n  console.log(eventId);\n\n  try {\n    const eventData = await eventsApiService.fetchEvents('1a9Zk7Y34xAZe56');\n\n    const markup = modalMarkup(eventData);\n    modalCardEl.insertAdjacentHTML('beforeend', markup);\n    modalCardEl.classList.remove('is-hidden');\n    modalCardEl.addEventListener('click', onModalClose);\n  } catch (error) {\n    console.error('Error fetching event data:', error);\n  }\n}\n\nfunction onModalClose(e) {\n  if (\n    e.target.classList.contains('info__modal__close-btn') || // Натиснута кнопка закриття\n    e.target === modalCardEl // Натиснуто за межами модального вікна\n  ) {\n    modalCardEl.classList.add('is-hidden'); // Приховуємо модальне вікно\n    modalCardEl.removeEventListener('click', onModalClose); // Видаляємо слухач для закриття\n  }\n}\n"],"names":["EventsApiService","__privateAdd","_API_KEY","_BASE_URL","id","searchParams","__privateGet","url","response","cardMarkup","cards","card","imageUrl","_a","nameArtist","eventDate","location","_c","_b","eventUrl","renderPagination","totalPages","currentPage","onPageClick","paginationList","buttonsMarkup","getPaginationButtons","page","onPaginalBtnClick","e","newPage","buttons","i","start","end","cardsList","searchForm","searchInput","eventsApiService","renderEvents","onSearchQuery","clearEventsList","clearPagination","data","events","markup","error","modalMarkup","modal","cardList","modalCardEl","openModalCard","eventId","eventData","onModalClose"],"mappings":"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"}